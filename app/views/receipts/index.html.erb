<div class="dashboard-container">
  <div class="sidebar" id="sidebar">
    <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle Sidebar" onclick="toggleSidebar()">
      <svg class="toggle-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect width="18" height="18" x="3" y="3" rx="2"/>
        <path d="M9 3v18"/>
        <path d="m14 9 3 3-3 3"/>
      </svg>
    </button>

    <div class="sidebar-header">
      <div class="logo-container">
        <div class="logo-icon">üçΩÔ∏è</div>
        <span class="logo-text">SeatSync</span>
      </div>
    </div>

    <nav class="sidebar-nav">
      <%= link_to dashboard_path, class: 'nav-item' do %>
        <span class="nav-content"><span class="nav-text">Restaurant Analytics</span></span>
        <div class="nav-marquee"><div class="marquee-inner"><span>Restaurant Analytics</span><span>Restaurant Analytics</span></div></div>
      <% end %>
      
      <%= link_to new_receipt_path, class: 'nav-item' do %>
        <span class="nav-content"><span class="nav-text">Upload Images</span></span>
        <div class="nav-marquee"><div class="marquee-inner"><span>Upload Images</span><span>Upload Images</span></div></div>
      <% end %>
      
      <%= link_to ingredients_path, class: 'nav-item' do %>
        <span class="nav-content"><span class="nav-text">Ingredients Dashboard</span></span>
        <div class="nav-marquee"><div class="marquee-inner"><span>Ingredients Dashboard</span><span>Ingredients Dashboard</span></div></div>
      <% end %>
    </nav>
  </div>

  <div class="main-content" id="mainContent">
    <div class="dashboard-header">
      <div>
        <h1 class="dashboard-title">Receipt Dashboard</h1>
        <p class="dashboard-subtitle">All uploaded receipts and parsed items</p>
      </div>
      <div style="margin-left:auto; display:flex; gap:0.5rem; align-items:center;">
        <%= link_to '‚Üê Back to Dashboard', dashboard_path, class: 'btn', style: 'background:transparent; color:#94a3b8; border:1px solid #1f2a44; padding:0.45rem 0.85rem; border-radius:8px; text-decoration:none;' %>
        <%= link_to 'Upload New Receipt', new_receipt_path, class: 'btn', style: 'background: linear-gradient(135deg, #06b6d4 0%, #0ea5e9 100%); color: white; padding:0.45rem 0.85rem; border-radius:8px; text-decoration:none;' %>
      </div>
    </div>

    <div class="chart-card" style="margin-top:1rem; padding:1.25rem;">
      <% if @receipts.any? %>
        <div class="receipt-table" style="overflow:auto;">
          <table style="width:100%; border-collapse: collapse;">
            <thead>
              <tr style="border-bottom: 2px solid #334155;">
                <th style="padding:12px; text-align:left; color:#94a3b8; font-size:12px; text-transform:uppercase;">Date</th>
                <th style="padding:12px; text-align:left; color:#94a3b8; font-size:12px; text-transform:uppercase;">Time</th>
                <th style="padding:12px; text-align:left; color:#94a3b8; font-size:12px; text-transform:uppercase;">Items</th>
                <th style="padding:12px; text-align:left; color:#94a3b8; font-size:12px; text-transform:uppercase;">Actions</th>
              </tr>
            </thead>
            <tbody>
              <% @receipts.each do |receipt| %>
                <tr style="border-bottom:1px solid #1e293b;">
                  <td style="padding:16px; color:#e2e8f0;"><%= receipt.receipt_date %></td>
                  <td style="padding:16px; color:#e2e8f0;"><%= receipt.receipt_time %></td>
                  <td style="padding:16px; color:#e2e8f0;">
                    <% if receipt.receipt_items.any? %>
                      <%= receipt.receipt_items.map { |ri| "#{ri.quantity}x #{ri.item.name}" }.join(', ') %>
                    <% elsif receipt.order_items.present? %>
                      <%= receipt.order_items.join(', ') %>
                    <% else %>
                      <em style="color:#94a3b8;">No items</em>
                    <% end %>
                  </td>
                  <td style="padding:16px;"><%= link_to 'View', receipt_path(receipt), class: 'btn', style: 'background:transparent; color:#06b6d4; border:1px solid #083344; padding:0.35rem 0.6rem; border-radius:6px; text-decoration:none;' %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      <% else %>
        <div style="text-align:center; padding:2rem; color:#94a3b8;">No receipts uploaded yet.</div>
      <% end %>
    </div>
  </div>
</div>

<script>
function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('collapsed');
  document.getElementById('mainContent').classList.toggle('expanded');
}
</script>
